"use strict";function init(){function getSortedDataset(dataset,metric,gameMode,sort){var sub_dataset=dataset.filter(function(d){return d.queueid==gameMode});return"count"==sort?"play"==metric?sub_dataset.sort(function(a,b){return d3.descending(a.ngames,b.ngames)}):sub_dataset.sort(function(a,b){return d3.descending(a.nwins/a.ngames,b.nwins/b.ngames)}):sub_dataset.sort(function(a,b){return d3.ascending(a.champion,b.champion)}),sub_dataset}function findRank(dataset,metric,gameMode,championName){if("play"==metric)var sub_dataset=dataset.filter(function(d){return d.queueid==gameMode}).sort(function(a,b){return d3.descending(a.ngames,b.ngames)});else sub_dataset=dataset.filter(function(d){return d.queueid==gameMode}).sort(function(a,b){return d3.descending(a.nwins/a.ngames,b.nwins/b.ngames)});return sub_dataset.findIndex(function(x){return x.champion==championName})+1}function updateMouseover(){champion_groups=svg.selectAll(".champion_group"),champion_groups.on("click",function(d){var currentChampion=d.champion;champion_groups.selectAll(".nameLabel").style("font-family","radnika-regular").text(function(d){return d.champion}).filter(function(d,i){return d.champion==currentChampion}).style("font-family","radnika-bold").text(function(d){return"#"+findRank(dataset,metric,d.queueid,d.champion)+" "+d.champion}),680<=document.getElementById("graphic").getBoundingClientRect().width&&champion_groups.selectAll(".countLabel").style("fill","none").filter(function(d){return d.champion==currentChampion}).style("fill",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"black":"white":"black"}),"play"==metric?champion_groups.selectAll(".bar").style("fill",barColor).filter(function(d){return d.champion==currentChampion}).style("fill",highlightBarColor):"win"==metric&&champion_groups.selectAll(".dot").style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}).filter(function(d){return d.champion==currentChampion}).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dark_green:winRate<.5?dark_red:dark_gray})})}function updateButton(button){var otherButtonID,value=button._groups[0][0].value;button.style("background-color",d3.rgb(79,39,79)).style("color","white"),"play"==value?document.getElementById("button-count").innerHTML="Play count":"win"==value&&(document.getElementById("button-count").innerHTML="Win rate"),"play"==value?otherButtonID="#button-win":"win"==value?otherButtonID="#button-play":"count"==value?otherButtonID="#button-alpha":"alpha"==value&&(otherButtonID="#button-count"),d3.select(otherButtonID).style("background-color","white").style("color",d3.rgb(79,39,79))}function updateSizing(dataset){var currentHeight=d3.select("#col1").node().getBBox().height;document.getElementById("graphic").style.height=currentHeight+30+"px",(breakline=breakline.data(getSortedDataset(dataset,"play",1200,sort).filter(function(d,i){return(i+1)%5==0}))).exit().remove();var breakline_enter=breakline.enter().append("line").attr("class","breakline").attr("x1",0).attr("x2",w_svg-margin.left-margin.right).attr("y1",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2}).attr("y2",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2});breakline=breakline.merge(breakline_enter),"win"==metric&&svg.selectAll(".midline").attr("y2",currentHeight+15)}function updateBarsDots(dataset,sort,metric){!function(dataset,sort,metric){group420=group420.data(getSortedDataset(dataset,metric,420,sort)),group450=group450.data(getSortedDataset(dataset,metric,450,sort)),group1200=group1200.data(getSortedDataset(dataset,metric,1200,sort)),group420.exit().remove(),group450.exit().remove(),group1200.exit().remove()}(dataset,sort,metric);var group420enter=group420.enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")"),group450enter=group450.enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")"),group1200enter=group1200.enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")");group420enter.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),group450enter.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),group1200enter.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),group420enter.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group450enter.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group1200enter.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group420enter.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",function(d){return"play"==metric?barColor:"none"}),group450enter.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",function(d){return"play"==metric?barColor:"none"}),group1200enter.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",function(d){return"play"==metric?barColor:"none"}),group450enter.append("rect").attr("class","dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("height",2).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group420enter.append("rect").attr("class","dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("height",2).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group1200enter.append("rect").attr("class","dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("height",2).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group420enter.append("circle").attr("class","dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).attr("r",4).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),group450enter.append("circle").attr("class","dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).attr("r",4).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),group1200enter.append("circle").attr("class","dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).attr("r",4).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),group420enter.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group450enter.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group1200enter.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group420=group420.merge(group420enter),group450=group450.merge(group450enter),group1200=group1200.merge(group1200enter),group420.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group450.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group1200.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group420.select(".nameLabel").text(function(d){return d.champion}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).style("font-family","radnika-regular"),group450.select(".nameLabel").text(function(d){return d.champion}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).style("font-family","radnika-regular"),group1200.select(".nameLabel").text(function(d){return d.champion}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).style("font-family","radnika-regular"),group420.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}).style("fill","none"),group450.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}).style("fill","none"),group1200.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}).style("fill","none"),group420.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).style("fill",function(d){return"play"==metric?barColor:"none"}),group450.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).style("fill",function(d){return"play"==metric?barColor:"none"}),group1200.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).style("fill",function(d){return"play"==metric?barColor:"none"}),group420.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group450.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group1200.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}).style("fill",function(d){return"win"==metric?gray:"none"}),group420.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),group450.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),group1200.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}).style("fill",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?green:winRate<.5?red:gray}),"play"==metric?(svg.selectAll(".dotDistance").style("fill","none"),svg.selectAll(".dot").style("fill","none"),svg.selectAll(".midline").style("stroke","none"),svg.selectAll(".numline_label").style("fill","none")):(svg.selectAll(".bar").style("fill","none"),svg.selectAll(".midline").style("stroke",gray),svg.selectAll(".numline_label").style("fill",gray)),updateMouseover(),updateSizing(dataset)}var metric,sort,breakline,group420,group450,group1200,svg=d3.select("#svg-barchart"),w_svg=document.getElementById("svg-barchart").getBoundingClientRect().width,margin={top:30,bottom:10,left:0,right:40},dim_col={w_col:(w_svg-margin.left-margin.right)/3,w_names:105,btwn_colnames:3,btwn_col1:5,btwn_col2:5,w_colmin:60,h_col:13,h_btwn:5,top:30,left:5},barColor=(dim_col.w_col,dim_col.left,dim_col.w_names,dim_col.btwn_col1,dim_col.btwn_col2,d3.color("#f6bba8")),highlightBarColor=d3.rgb(79,39,79),dark_gray=(d3.rgb(200,200,200),d3.rgb(100,100,100)),gray=d3.color("#a19da8"),green=d3.rgb(0,150,0),dark_green=d3.rgb(0,200,0),red=d3.rgb(212,89,84),dark_red=d3.rgb(320,44,28),global_min_ngames=d3.min(dataset,function(d){return d.ngames}),global_max_ngames=d3.max(dataset,function(d){return d.ngames}),xScale_play=d3.scaleLinear().domain([global_min_ngames,global_max_ngames]).range([1,dim_col.w_col-dim_col.w_names-dim_col.btwn_colnames]),xScale_win=d3.scaleLinear().domain([.32,.7]).range([1,dim_col.w_col-dim_col.w_names-dim_col.btwn_colnames]);!function(){metric="play",sort="count";var col1=svg.append("g").attr("class","column").attr("id","col1").attr("transform","translate("+margin.left+","+margin.top+")"),col2=svg.append("g").attr("class","column").attr("id","col2").attr("transform","translate("+(margin.left+dim_col.w_col+dim_col.btwn_col1)+","+margin.top+")"),col3=svg.append("g").attr("class","column").attr("id","col3").attr("transform","translate("+(margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2)+","+margin.top+")");col1.append("text").attr("class","mode_label").attr("x",dim_col.w_col/2).attr("y",0).text("Nexus Blitz"),col2.append("text").attr("class","mode_label").attr("x",dim_col.w_col/2).attr("y",0).text("Ranked 5v5"),col3.append("text").attr("class","mode_label").attr("x",dim_col.w_col/2).attr("y",0).text("ARAM"),group420=col2.selectAll("group420").data(getSortedDataset(dataset,metric,420,sort)).enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")"),group450=col3.selectAll("group450").data(getSortedDataset(dataset,metric,450,sort)).enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")"),group1200=col1.selectAll("group1200").data(getSortedDataset(dataset,metric,1200,sort)).enter().append("g").attr("class","champion_group").attr("transform","translate(0,"+dim_col.top+")"),group420.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),group450.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),group1200.append("rect").attr("class","background").attr("x",0).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",dim_col.w_col).attr("height",dim_col.h_col),svg.selectAll(".column").append("text").attr("class","numline_label").attr("x",dim_col.left+dim_col.w_names+xScale_win(.5)).attr("y",23).text("50%").style("fill","none"),group420.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group450.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group1200.append("text").attr("class","nameLabel").attr("x",dim_col.w_names-dim_col.btwn_colnames).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}).text(function(d){return d.champion}),group420.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",barColor),group450.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",barColor),group1200.append("rect").attr("class","bar").attr("x",dim_col.left+dim_col.w_names).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}).attr("width",function(d){return xScale_play(d.ngames)}).attr("height",dim_col.h_col).style("fill",barColor),group420.append("rect").attr("class","dotDistance").attr("height",2).style("fill","none"),group450.append("rect").attr("class","dotDistance").attr("height",2).style("fill","none"),group1200.append("rect").attr("class","dotDistance").attr("height",2).style("fill","none"),group420.append("circle").attr("class","dot").attr("r",4).style("fill","none"),group450.append("circle").attr("class","dot").attr("r",4).style("fill","none"),group1200.append("circle").attr("class","dot").attr("r",4).style("fill","none"),group420.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group450.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group1200.append("text").attr("class","countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).text(function(d){return"play"==metric?d3.format(",")(d.ngames):d3.format(".0%")(d.nwins/d.ngames)}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"});var currentHeight=d3.select("#col1").node().getBBox().height;svg.append("line").attr("class","midline").attr("id","midline1").attr("x1",margin.left+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("y1",margin.top+28).attr("y2",margin.top+currentHeight+18).style("stroke","none"),svg.append("line").attr("class","midline").attr("id","midline2").attr("x1",margin.left+dim_col.w_col+dim_col.btwn_col1+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+dim_col.w_col+dim_col.btwn_col1+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("y1",margin.top+28).attr("y2",margin.top+currentHeight+18).style("stroke","none"),svg.append("line").attr("class","midline").attr("id","midline3").attr("x1",margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("y1",margin.top+28).attr("y2",margin.top+currentHeight+18).style("stroke","none");var breakline_g=svg.append("g").attr("id","breakline_g");breakline=breakline_g.selectAll("breakline").data(getSortedDataset(dataset,metric,1200,sort).filter(function(d,i){return(i+1)%5==0})).enter().append("line").attr("class","breakline").attr("x1",0).attr("x2",w_svg-margin.left-margin.right).attr("y1",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2}).attr("y2",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2}),champion_groups=svg.selectAll(".champion_group"),champion_groups.on("click",function(d){var currentChampion=d.champion;champion_groups.selectAll(".nameLabel").style("font-family","radnika-regular").text(function(d){return d.champion}).filter(function(d,i){return d.champion==currentChampion}).style("font-family","radnika-bold").text(function(d){return"#"+findRank(dataset,metric,d.queueid,d.champion)+" "+d.champion}),680<=document.getElementById("graphic").getBoundingClientRect().width&&champion_groups.selectAll(".countLabel").style("fill","none").filter(function(d){return d.champion==currentChampion}).style("fill",function(d){return xScale_play(d.ngames)<=dim_col.w_colmin?"black":"white"}),champion_groups.selectAll(".bar").style("fill",barColor).filter(function(d){return d.champion==currentChampion}).style("fill",highlightBarColor)})}(),d3.select("#button-win").on("click",function(){metric="win",updateButton(d3.select(this)),updateBarsDots(dataset,sort,metric)}),d3.select("#button-play").on("click",function(){metric="play",updateButton(d3.select(this)),updateBarsDots(dataset,sort,metric)}),d3.select("#button-count").on("click",function(){sort="count",updateButton(d3.select(this)),updateBarsDots(dataset,sort,metric)}),d3.select("#button-alpha").on("click",function(){sort="alpha",updateButton(d3.select(this)),updateBarsDots(dataset,sort,metric)}),d3.select("#filter-class").on("change",function(){var filterSelection=d3.select(this).node().value;dataset="all"==filterSelection?dataset_threemodes:dataset_threemodes.filter(function(d){return d.broad_role==filterSelection}),updateButton(d3.select(this)),updateBarsDots(dataset,sort,metric)}),window.addEventListener("resize",function(){w_svg=document.getElementById("svg-barchart").getBoundingClientRect().width,dim_col.w_col=(w_svg-margin.left-margin.right)/3,dim_col.w_col-dim_col.left-dim_col.w_names-dim_col.btwn_col1-dim_col.btwn_col2,xScale_play=d3.scaleLinear().domain([global_min_ngames,global_max_ngames]).range([1,dim_col.w_col-dim_col.w_names-dim_col.btwn_colnames]),xScale_win=d3.scaleLinear().domain([.32,.7]).range([1,dim_col.w_col-dim_col.w_names-dim_col.btwn_colnames]),svg.select("#col1").attr("transform","translate("+margin.left+","+margin.top+")"),svg.select("#col2").attr("transform","translate("+(margin.left+dim_col.w_col+dim_col.btwn_col1)+","+margin.top+")"),svg.select("#col3").attr("transform","translate("+(margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2)+","+margin.top+")"),svg.selectAll(".mode_label").attr("x",dim_col.w_col/2),group420.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group450.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group1200.select(".background").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group420.select(".nameLabel").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}),group450.select(".nameLabel").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}),group1200.select(".nameLabel").attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+3}),680<=document.getElementById("graphic").getBoundingClientRect().width?(group420.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group450.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"}),group1200.select(".countLabel").attr("x",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?dim_col.left+dim_col.w_names+xScale_play(d.ngames)+3:dim_col.left+dim_col.w_names+xScale_play(d.ngames)-5:.5<=d.nwins/d.ngames?dim_col.left+dim_col.w_names+xScale_win(.5)-8:dim_col.left+dim_col.w_names+xScale_win(.5)+8}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2+4}).style("text-anchor",function(d){return"play"==metric?xScale_play(d.ngames)<=dim_col.w_colmin?"start":"end":.5<=d.nwins/d.ngames?"end":"start"})):svg.selectAll(".countLabel").style("fill","none"),group420.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group450.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group1200.select(".bar").attr("width",function(d){return xScale_play(d.ngames)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i}),group420.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}),group450.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}),group1200.select(".dotDistance").attr("x",function(d){var winRate=+(d.nwins/d.ngames).toFixed(2);return.5<winRate?dim_col.left+dim_col.w_names+xScale_win(.5):dim_col.left+dim_col.w_names+xScale_win(winRate)}).attr("y",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2-1}).attr("width",function(d){return Math.abs(xScale_win(+(d.nwins/d.ngames).toFixed(2))-xScale_win(.5))}),group420.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}),group450.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}),group1200.select(".dot").attr("cx",function(d){return dim_col.left+dim_col.w_names+xScale_win(+(d.nwins/d.ngames).toFixed(2))}).attr("cy",function(d,i){return(dim_col.h_col+dim_col.h_btwn)*i+dim_col.h_col/2}),svg.selectAll(".numline_label").attr("x",dim_col.left+dim_col.w_names+xScale_win(.5)),svg.select("#midline1").attr("x1",margin.left+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+dim_col.left+dim_col.w_names+xScale_win(.5)),svg.select("#midline2").attr("x1",margin.left+dim_col.w_col+dim_col.btwn_col1+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+dim_col.w_col+dim_col.btwn_col1+dim_col.left+dim_col.w_names+xScale_win(.5)),svg.select("#midline3").attr("x1",margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2+dim_col.left+dim_col.w_names+xScale_win(.5)).attr("x2",margin.left+2*dim_col.w_col+dim_col.btwn_col1+dim_col.btwn_col2+dim_col.left+dim_col.w_names+xScale_win(.5)),svg.selectAll(".breakline").attr("x2",w_svg-margin.left-margin.right).attr("y1",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2}).attr("y2",function(d,i){return margin.top+dim_col.top+(dim_col.h_col+dim_col.h_btwn)*(i+1)*5-dim_col.h_btwn/2})})}function rowConverter(d){return{champion:d.champion,queueid:parseInt(d.queueid),ngames:parseInt(d.ngames),nwins:parseInt(d.nwins),nkills:parseInt(d.nkills),ndeaths:parseInt(d.ndeaths),nassists:parseInt(d.nassists),totalminionskilled:parseInt(d.totalminionskilled),neutralminionskilled:parseInt(d.neutralminionskilled),avgdamagedealtchampions:parseInt(d.avgdamagedealtchampions),role:d.role,broad_role:d.broad_role}}d3.csv("champion_stats_by_queue.csv",rowConverter,function(data){orig_dataset=data,dataset_threemodes=data.filter(function(d){return 470!=d.queueid}),dataset=dataset_threemodes,init()});